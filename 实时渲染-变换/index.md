# 变换


## ***引言***

*变换（transform）是指以点、向量、颜色等实体作为输入，并以某种方式对其进行转换的一种操作。对于计算机图形学从业者而言，熟练掌握变换相关的知识是非常重要的。通过各种变换操作，我们可以对物体、光源和相机进行移动、变形以及设定动 画；我们还可以确保所有的计算都在同一个坐标系下进行，以及使用不同的方式来将物体投影到一个平面上。这里我们只列举了变换所能完成的部分操作，但是足以证明变换在实时图形学中的重要性，或者可以说，在任何领域图形学中的重要性。*

1. ***线性变换***

   *线性变换是指一种仅保留向量加法个标量乘法的变换，具体来说就是：*
   $$
   f(x) + f(y) = f(x+y)
   \\\ \\\
   kf(x) = f(kx)
   $$

2. ***缩放变换***

   *例如：现在有一个变换 $f(x) = 5x$，他代表将输入向量 x 的每个分量都乘以 5。为了证明这个变换是线性的，他必须满足上述两个条件，目前确实也是满足的。*

   ***这种函数就叫做缩放变换**，因为他改变了一个物理的大小（尺寸）*

3. ***旋转变换***

   *旋转变换是另一种线性变换，他将一个向量以原点为中心进行旋转。*

4. ***平移变换***

   *函数 $f(x) = x + (7, 3, 2)$是一个非线性变换，其中的向量x是一个三维向量。对两个不同的向量分别执行这个函数，其结果为每个向量各自加上(7, 3, 2)，这就是平移变换。*

   *也就是说让一个向量加上另一个固定向量，意味着完成了一次平移变换*

5. ***仿射变换***

   *仿射变换通常存储在一个 4 x 4 的矩阵中*

   *仿射变换是指先进性一次线性变换，然后在进行一次平移操作的变换。*

   *我们使用其次符号来表示这样的四维向量。点和方向也会使用同样的方式来进行表示（小写的粗体字母）*

   *实时渲染中所使用的平移、旋转、缩放、对称和剪切矩阵都是仿射类型的。*

   *仿射变换最主要的特征就是它保证了直线的平行性（即两个平行的直线在变换之后仍然是平行的），但是其长度和角度可能会发生一些变化。一个仿射变换也可以表示为一系列独立仿射变换的组合。*

*缩放变换和旋转变换以及事实上所有应用三维向量的线性变换，都可以使用一个 3 x 3 矩阵来进行表示；但是，3 x 3的矩阵尺寸通常是不够的*

| *符号*                                                    | *名称*       |                          *特征描述*                          |
| :-------------------------------------------------------- | :----------- | :----------------------------------------------------------: |
| **$T(\mathbf{t})$**                                       | *平移矩阵*   |        *移动一个点；是仿射变换，保持方向和长度不变。*        |
| **$R_x(\rho)$**                                           | 旋转矩阵     | *绕 x 轴旋转 $\rho$ 弧度；绕 y, z 轴是类似的；是正交矩阵 & 仿射变换。* |
| **$\mathbf{R}$**                                          | 旋转矩阵     | *任意的旋转矩阵；是正交矩阵，保持长度和角度不变；是仿射变换。* |
| **$S(\mathbf{s})$**                                       | 缩放矩阵     | *根据传入的向量 $\mathbf{s}$，沿 x, y, z 轴进行缩放；是仿射变换。如果 $\mathbf{s}$ 的分量不同，则为非均匀缩放。* |
| **$H_{ij}(s)$**                                           | 剪切变换     | *将分量 i 相对于分量 j 进行剪切；例如，$H_{xy}(s)$ 将 x 坐标偏移 $s \cdot y$；是仿射变换。* |
| **$E(h, p, r)$**                                          | 欧拉变换     | *根据给定的欧拉角 (yaw, pitch, roll) 创建一个表示朝向的旋转矩阵；是正交矩阵 & 仿射变换。* |
| **$\mathbf{P}_o(s)$**                                     | 正交投影矩阵 | *平行投影到一个平面或者是规范观察体积（view volume）；是线性变换，但会降低维度。* |
| **$\mathbf{P}_p(s)$**                                     | 透视投影矩阵 | *透视投影到一个平面或者视锥体（frustum）；这不是仿射变换，而是射影变换。* |
| **$\text{slerp}(\hat{\mathbf{p}}, \hat{\mathbf{r}}, t)$** | 球面插值     | *根据参数 $t$，在两个单位四元数 $\hat{\mathbf{p}}$ 和 $\hat{\mathbf{r}}$ 之间进行球面线性插值，返回一个插值后的新四元数。* |

## ***基本变换***

*本小节会介绍最基本的变换操作，例如平移、旋转、缩放、剪切、变换组合、刚体变换、法线变换以及计算逆矩阵等。*

### ***平移***


